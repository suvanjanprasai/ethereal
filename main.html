<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Ethereal E-commerce</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #0F0F0F 0%, #1A1A1A 50%, #2D2D2D 100%);
            color: #E5E5E5;
            min-height: 100vh;
            line-height: 1.6;
        }

        .dashboard-container {
            display: grid;
            grid-template-columns: 280px 1fr;
            min-height: 100vh;
        }

        /* Sidebar */
        .sidebar {
            background: rgba(26, 26, 26, 0.95);
            border-right: 1px solid rgba(212, 175, 55, 0.2);
            padding: 2rem 0;
            position: fixed;
            height: 100vh;
            width: 280px;
            overflow-y: auto;
            backdrop-filter: blur(10px);
        }

        .sidebar-header {
            padding: 0 2rem 2rem;
            border-bottom: 1px solid rgba(212, 175, 55, 0.2);
            margin-bottom: 2rem;
        }

        .admin-logo {
            font-family: 'Playfair Display', serif;
            font-size: 1.5rem;
            font-weight: 700;
            background: linear-gradient(45deg, #D4AF37, #FFD700);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 0.5rem;
        }

        .admin-subtitle {
            font-size: 0.9rem;
            color: #CCCCCC;
            font-weight: 500;
        }

        .sidebar-nav {
            list-style: none;
            padding: 0 1rem;
        }

        .sidebar-nav li {
            margin-bottom: 0.5rem;
        }

        .sidebar-nav a {
            display: flex;
            align-items: center;
            gap: 1rem;
            color: #E5E5E5;
            text-decoration: none;
            padding: 1rem;
            border-radius: 12px;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .sidebar-nav a:hover,
        .sidebar-nav a.active {
            background: linear-gradient(45deg, rgba(212, 175, 55, 0.1), rgba(255, 215, 0, 0.1));
            color: #D4AF37;
            transform: translateX(5px);
        }

        .sidebar-nav i {
            font-size: 1.1rem;
            width: 20px;
        }

        /* Main Content */
        .main-content {
            margin-left: 280px;
            padding: 2rem;
        }

        .content-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(212, 175, 55, 0.2);
        }

        .page-title {
            font-family: 'Playfair Display', serif;
            font-size: 2.5rem;
            font-weight: 700;
            color: #E5E5E5;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .user-avatar {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: linear-gradient(45deg, #D4AF37, #FFD700);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            color: #0F0F0F;
        }

        /* Dashboard Cards */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .dashboard-card {
            background: rgba(26, 26, 26, 0.9);
            border: 1px solid rgba(212, 175, 55, 0.2);
            border-radius: 16px;
            padding: 2rem;
            transition: all 0.3s ease;
        }

        .dashboard-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .card-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #E5E5E5;
        }

        .card-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            background: linear-gradient(45deg, rgba(212, 175, 55, 0.1), rgba(255, 215, 0, 0.1));
            display: flex;
            align-items: center;
            justify-content: center;
            color: #D4AF37;
            font-size: 1.5rem;
        }

        .card-value {
            font-size: 2.5rem;
            font-weight: 700;
            color: #D4AF37;
            margin-bottom: 0.5rem;
        }

        .card-label {
            color: #CCCCCC;
            font-size: 0.9rem;
        }

        /* Tables */
        .table-container {
            background: rgba(26, 26, 26, 0.9);
            border: 1px solid rgba(212, 175, 55, 0.2);
            border-radius: 16px;
            overflow: hidden;
            margin-bottom: 2rem;
        }

        .table-header {
            padding: 1.5rem 2rem;
            background: rgba(212, 175, 55, 0.1);
            border-bottom: 1px solid rgba(212, 175, 55, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .table-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: #E5E5E5;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-primary {
            background: linear-gradient(45deg, #D4AF37, #FFD700);
            color: #0F0F0F;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(212, 175, 55, 0.3);
        }

        .btn-secondary {
            background: rgba(212, 175, 55, 0.1);
            color: #D4AF37;
            border: 1px solid rgba(212, 175, 55, 0.3);
        }

        .btn-danger {
            background: rgba(255, 68, 68, 0.1);
            color: #ff4444;
            border: 1px solid rgba(255, 68, 68, 0.3);
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
        }

        .data-table th,
        .data-table td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid rgba(212, 175, 55, 0.1);
        }

        .data-table th {
            background: rgba(212, 175, 55, 0.05);
            font-weight: 600;
            color: #D4AF37;
        }

        .data-table tr:hover {
            background: rgba(212, 175, 55, 0.05);
        }

        .product-image {
            width: 50px;
            height: 50px;
            border-radius: 8px;
            object-fit: cover;
        }

        .status-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .status-in-stock {
            background: rgba(76, 175, 80, 0.2);
            color: #4CAF50;
        }

        .status-out-of-stock {
            background: rgba(255, 68, 68, 0.2);
            color: #ff4444;
        }

        .status-low-stock {
            background: rgba(255, 193, 7, 0.2);
            color: #FFC107;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: rgba(26, 26, 26, 0.95);
            margin: 2% auto;
            padding: 2rem;
            border: 1px solid rgba(212, 175, 55, 0.2);
            border-radius: 16px;
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(212, 175, 55, 0.2);
        }

        .modal-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: #E5E5E5;
        }

        .close {
            color: #CCCCCC;
            font-size: 2rem;
            font-weight: bold;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .close:hover {
            color: #D4AF37;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: #E5E5E5;
        }

        .form-control {
            width: 100%;
            padding: 12px;
            border: 1px solid rgba(212, 175, 55, 0.3);
            border-radius: 8px;
            background: rgba(26, 26, 26, 0.8);
            color: #E5E5E5;
            transition: border-color 0.3s ease;
        }

        .form-control:focus {
            outline: none;
            border-color: #D4AF37;
            box-shadow: 0 0 0 2px rgba(212, 175, 55, 0.1);
        }

        .image-preview {
            width: 100px;
            height: 100px;
            border-radius: 8px;
            object-fit: cover;
            margin-top: 0.5rem;
            border: 1px solid rgba(212, 175, 55, 0.2);
        }

        .hidden {
            display: none;
        }

        .section {
            margin-bottom: 3rem;
        }

        .action-buttons {
            display: flex;
            gap: 0.5rem;
        }

        .btn-sm {
            padding: 6px 12px;
            font-size: 0.8rem;
        }

        @media (max-width: 768px) {
            .dashboard-container {
                grid-template-columns: 1fr;
            }

            .sidebar {
                position: relative;
                width: 100%;
                height: auto;
            }

            .main-content {
                margin-left: 0;
            }
        }
    </style>
</head>

<body>
    <div class="dashboard-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="admin-logo">Ethereal Admin</div>
                <div class="admin-subtitle">Dashboard Control Panel</div>
            </div>
            <nav>
                <ul class="sidebar-nav">
                    <li><a href="#" class="nav-link active" data-section="dashboard">
                            <i class="fas fa-chart-line"></i> Dashboard
                        </a></li>
                    <li><a href="#" class="nav-link" data-section="products">
                            <i class="fas fa-gem"></i> Products
                        </a></li>
                    <li><a href="#" class="nav-link" data-section="orders">
                            <i class="fas fa-shopping-cart"></i> Orders
                        </a></li>
                    <li><a href="#" class="nav-link" data-section="analytics">
                            <i class="fas fa-chart-bar"></i> Analytics
                        </a></li>
                    <li><a href="#" class="nav-link" data-section="categories">
                            <i class="fas fa-tags"></i> Categories
                        </a></li>
                    <li><a href="#" class="nav-link" data-section="settings">
                            <i class="fas fa-cog"></i> Settings
                        </a></li>
                </ul>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <div class="content-header">
                <h1 class="page-title" id="pageTitle">Dashboard</h1>
                <div class="user-info">
                    <div class="user-avatar">AD</div>
                    <div>
                        <div style="font-weight: 600;">Admin User</div>
                        <div style="font-size: 0.8rem; color: #CCCCCC;">Administrator</div>
                    </div>
                </div>
            </div>

            <!-- Dashboard Section -->
            <div id="dashboardSection" class="section">
                <div class="dashboard-grid">
                    <div class="dashboard-card">
                        <div class="card-header">
                            <div class="card-title">Total Products</div>
                            <div class="card-icon"><i class="fas fa-gem"></i></div>
                        </div>
                        <div class="card-value" id="totalProducts">0</div>
                        <div class="card-label">Active products in store</div>
                    </div>
                    <div class="dashboard-card">
                        <div class="card-header">
                            <div class="card-title">Total Orders</div>
                            <div class="card-icon"><i class="fas fa-shopping-cart"></i></div>
                        </div>
                        <div class="card-value" id="totalOrders">0</div>
                        <div class="card-label">Orders this month</div>
                    </div>
                    <div class="dashboard-card">
                        <div class="card-header">
                            <div class="card-title">Revenue</div>
                            <div class="card-icon"><i class="fas fa-dollar-sign"></i></div>
                        </div>
                        <div class="card-value" id="totalRevenue">$0</div>
                        <div class="card-label">Total revenue this month</div>
                    </div>
                    <div class="dashboard-card">
                        <div class="card-header">
                            <div class="card-title">Low Stock Items</div>
                            <div class="card-icon"><i class="fas fa-exclamation-triangle"></i></div>
                        </div>
                        <div class="card-value" id="lowStockItems">0</div>
                        <div class="card-label">Items need restocking</div>
                    </div>
                </div>
            </div>

            <!-- Products Section -->
            <div id="productsSection" class="section hidden">
                <div class="table-container">
                    <div class="table-header">
                        <div class="table-title">Product Management</div>
                        <button class="btn btn-primary" onclick="openProductModal()">
                            <i class="fas fa-plus"></i> Add New Product
                        </button>
                    </div>
                    <div style="overflow-x: auto;">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Image</th>
                                    <th>Product Name</th>
                                    <th>Category</th>
                                    <th>Material</th>
                                    <th>Price</th>
                                    <th>Stock</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="productsTableBody">
                                <!-- Products will be populated here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Orders Section -->
            <div id="ordersSection" class="section hidden">
                <div class="table-container">
                    <div class="table-header">
                        <div class="table-title">Order Management</div>
                        <button class="btn btn-secondary" onclick="exportOrders()">
                            <i class="fas fa-download"></i> Export Orders
                        </button>
                    </div>
                    <div style="overflow-x: auto;">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Order ID</th>
                                    <th>Customer</th>
                                    <th>Items</th>
                                    <th>Total</th>
                                    <th>Date</th>
                                    <th>Shipping Address</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="ordersTableBody">
                                <!-- Orders will be populated here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Analytics Section -->
            <div id="analyticsSection" class="section hidden">
                <div class="dashboard-grid">
                    <div class="dashboard-card">
                        <div class="card-header">
                            <div class="card-title">Monthly Sales</div>
                            <div class="card-icon"><i class="fas fa-chart-line"></i></div>
                        </div>
                        <div class="card-value" id="monthlySales">$0</div>
                        <div class="card-label">Sales performance this month</div>
                    </div>
                    <div class="dashboard-card">
                        <div class="card-header">
                            <div class="card-title">Top Category</div>
                            <div class="card-icon"><i class="fas fa-crown"></i></div>
                        </div>
                        <div class="card-value" id="topCategory">Rings</div>
                        <div class="card-label">Best performing category</div>
                    </div>
                    <div class="dashboard-card">
                        <div class="card-header">
                            <div class="card-title">Conversion Rate</div>
                            <div class="card-icon"><i class="fas fa-percentage"></i></div>
                        </div>
                        <div class="card-value" id="conversionRate">0%</div>
                        <div class="card-label">Visitor to customer ratio</div>
                    </div>
                    <div class="dashboard-card">
                        <div class="card-header">
                            <div class="card-title">Avg Order Value</div>
                            <div class="card-icon"><i class="fas fa-receipt"></i></div>
                        </div>
                        <div class="card-value" id="avgOrderValue">$0</div>
                        <div class="card-label">Average order amount</div>
                    </div>
                </div>
            </div>

            <!-- Categories Section -->
            <div id="categoriesSection" class="section hidden">
                <div class="table-container">
                    <div class="table-header">
                        <div class="table-title">Category Management</div>
                        <button class="btn btn-primary" onclick="openCategoryModal()">
                            <i class="fas fa-plus"></i> Add New Category
                        </button>
                    </div>
                    <div style="overflow-x: auto;">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Category Name</th>
                                    <th>Description</th>
                                    <th>Products Count</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="categoriesTableBody">
                                <!-- Categories will be populated here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Settings Section -->
            <div id="settingsSection" class="section hidden">
                <div class="table-container">
                    <div class="table-header">
                        <div class="table-title">Application Settings</div>
                    </div>
                    <div style="padding: 2rem;">
                        <div class="form-group">
                            <label class="form-label">Store Name</label>
                            <input type="text" class="form-control" value="Ethereal E-commerce">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Store Description</label>
                            <textarea class="form-control" rows="3">Luxury jewelry for the modern connoisseur</textarea>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Currency</label>
                            <select class="form-control">
                                <option value="USD">USD ($)</option>
                                <option value="EUR">EUR (€)</option>
                                <option value="GBP">GBP (£)</option>
                            </select>
                        </div>
                        <button class="btn btn-primary">Save Settings</button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Product Modal -->
    <div id="productModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="productModalTitle">Add New Product</h2>
                <span class="close" onclick="closeProductModal()">&times;</span>
            </div>
            <form id="productForm">
                <div class="form-group">
                    <label class="form-label">Product Name</label>
                    <input type="text" class="form-control" id="productName" required>
                </div>
                <div class="form-group">
                    <label class="form-label">One-liner Description</label>
                    <input type="text" class="form-control" id="productOneLiner" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Full Description</label>
                    <textarea class="form-control" id="productDescription" rows="3" required></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">Category</label>
                    <select class="form-control" id="productCategory" required>
                        <option value="">Select Category</option>
                        <option value="rings">Rings</option>
                        <option value="earrings">Earrings</option>
                        <option value="necklaces">Necklaces</option>
                        <option value="bracelets">Bracelets</option>
                        <option value="sets">Sets</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Material</label>
                    <input type="text" class="form-control" id="productMaterial" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Price ($)</label>
                    <input type="number" class="form-control" id="productPrice" step="0.01" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Stock Quantity</label>
                    <input type="number" class="form-control" id="productStock" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Product Image</label>
                    <input type="file" class="form-control" id="productImage" accept="image/*">
                    <img id="imagePreview" class="image-preview hidden" alt="Preview">
                </div>
                <div style="display: flex; gap: 1rem; margin-top: 2rem;">
                    <button type="submit" class="btn btn-primary">Save Product</button>
                    <button type="button" class="btn btn-secondary" onclick="closeProductModal()">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Category Modal -->
    <div id="categoryModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Add New Category</h2>
                <span class="close" onclick="closeCategoryModal()">&times;</span>
            </div>
            <form id="categoryForm">
                <div class="form-group">
                    <label class="form-label">Category Name</label>
                    <input type="text" class="form-control" id="categoryName" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Description</label>
                    <textarea class="form-control" id="categoryDescription" rows="3"></textarea>
                </div>
                <div style="display: flex; gap: 1rem; margin-top: 2rem;">
                    <button type="submit" class="btn btn-primary">Save Category</button>
                    <button type="button" class="btn btn-secondary" onclick="closeCategoryModal()">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Sample data - In production, this would come from a backend API
        let products = [
            {
                id: 1,
                name: "Soléa Gold Bangle",
                oneLiner: "Sleek and radiant luxury",
                description: "Sleek and radiant 18K gold with a mirror finish—crafted for effortless everyday luxury.",
                category: "bracelets",
                material: "18K Gold",
                price: 1400,
                stock: 15,
                image: "https://images.unsplash.com/photo-1515562141207-7a88fb7ce338?w=400&h=300&fit=crop"
            },
            {
                id: 2,
                name: "Sapphire Blue Earrings",
                oneLiner: "Deep ocean elegance",
                description: "Deep ocean sapphires set in platinum—where timeless beauty meets refined elegance.",
                category: "earrings",
                material: "Platinum & Sapphire",
                price: 1950,
                stock: 0,
                image: "https://images.unsplash.com/photo-1535632066927-ab7c9ab60908?w=400&h=300&fit=crop"
            },
            {
                id: 3,
                name: "24K Gold Earrings",
                oneLiner: "Pure gold brilliance",
                description: "Pure 24K gold earrings crafted for bold, unmistakable luxury.",
                category: "earrings",
                material: "24K Gold",
                price: 2200,
                stock: 3,
                image: "https://images.unsplash.com/photo-1506630448388-4e683c67ddb0?w=400&h=300&fit=crop"
            }
        ];

        let orders = [
            {
                id: "ORD-001",
                customer: "John Doe",
                email: "john@example.com",
                items: [
                    { productId: 1, quantity: 1, price: 1400 }
                ],
                total: 1400,
                date: new Date().toISOString().split('T')[0],
                shippingAddress: "123 Main St, New York, NY 10001",
                status: "pending"
            },
            {
                id: "ORD-002",
                customer: "Jane Smith",
                email: "jane@example.com",
                items: [
                    { productId: 2, quantity: 1, price: 1950 },
                    { productId: 3, quantity: 1, price: 2200 }
                ],
                total: 4150,
                date: new Date().toISOString().split('T')[0],
                shippingAddress: "456 Oak Ave, Los Angeles, CA 90210",
                status: "shipped"
            }
        ];

        let categories = [
            { id: 1, name: "Rings", description: "Elegant rings for every occasion", productCount: 2, status: "active" },
            { id: 2, name: "Earrings", description: "Beautiful earrings collection", productCount: 3, status: "active" },
            { id: 3, name: "Necklaces", description: "Stunning necklaces for all occasions", productCount: 1, status: "active" },
            { id: 4, name: "Bracelets", description: "Luxury bracelets and bangles", productCount: 2, status: "active" },
            { id: 5, name: "Sets", description: "Complete jewelry sets", productCount: 1, status: "active" }
        ];

        // Global variables
        let editingProductId = null;
        let editingCategoryId = null;

        // Initialize dashboard
        document.addEventListener('DOMContentLoaded', function () {
            initializeDashboard();
            renderProducts();
            renderOrders();
            renderCategories();
            updateDashboardStats();
            updateAnalytics();
        });

        // Navigation functionality
        document.addEventListener('click', function (e) {
            if (e.target.classList.contains('nav-link')) {
                e.preventDefault();
                const section = e.target.dataset.section;
                showSection(section);

                // Update active nav link
                document.querySelectorAll('.nav-link').forEach(link => link.classList.remove('active'));
                e.target.classList.add('active');
            }
        });

        function showSection(sectionName) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.add('hidden');
            });

            // Show selected section
            const targetSection = document.getElementById(sectionName + 'Section');
            if (targetSection) {
                targetSection.classList.remove('hidden');
            }

            // Update page title
            const pageTitle = document.getElementById('pageTitle');
            pageTitle.textContent = sectionName.charAt(0).toUpperCase() + sectionName.slice(1);
        }

        // Dashboard initialization
        function initializeDashboard() {
            // Set up image preview for product modal
            const imageInput = document.getElementById('productImage');
            if (imageInput) {
                imageInput.addEventListener('change', function (e) {
                    const file = e.target.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = function (e) {
                            const preview = document.getElementById('imagePreview');
                            preview.src = e.target.result;
                            preview.classList.remove('hidden');
                        };
                        reader.readAsDataURL(file);
                    }
                });
            }

            // Set up form submissions
            const productForm = document.getElementById('productForm');
            if (productForm) {
                productForm.addEventListener('submit', handleProductSubmit);
            }

            const categoryForm = document.getElementById('categoryForm');
            if (categoryForm) {
                categoryForm.addEventListener('submit', handleCategorySubmit);
            }
        }

        // Product management functions
        function renderProducts() {
            const tbody = document.getElementById('productsTableBody');
            if (!tbody) return;

            tbody.innerHTML = '';

            products.forEach(product => {
                const row = document.createElement('tr');
                const stockStatus = getStockStatus(product.stock);

                row.innerHTML = `
            <td><img src="${product.image}" alt="${product.name}" class="product-image"></td>
            <td>
                <div style="font-weight: 600;">${product.name}</div>
                <div style="font-size: 0.8rem; color: #CCCCCC;">${product.oneLiner}</div>
            </td>
            <td>${product.category}</td>
            <td>${product.material}</td>
            <td>$${product.price}</td>
            <td>${product.stock}</td>
            <td><span class="status-badge ${stockStatus.class}">${stockStatus.text}</span></td>
            <td>
                <div class="action-buttons">
                    <button class="btn btn-secondary btn-sm" onclick="editProduct(${product.id})">
                        <i class="fas fa-edit"></i> Edit
                    </button>
                    <button class="btn btn-danger btn-sm" onclick="deleteProduct(${product.id})">
                        <i class="fas fa-trash"></i> Delete
                    </button>
                </div>
            </td>
        `;

                tbody.appendChild(row);
            });
        }

        function getStockStatus(stock) {
            if (stock === 0) {
                return { class: 'status-out-of-stock', text: 'Out of Stock' };
            } else if (stock <= 5) {
                return { class: 'status-low-stock', text: 'Low Stock' };
            } else {
                return { class: 'status-in-stock', text: 'In Stock' };
            }
        }

        function openProductModal(productId = null) {
            const modal = document.getElementById('productModal');
            const modalTitle = document.getElementById('productModalTitle');
            const form = document.getElementById('productForm');

            if (productId) {
                // Edit mode
                const product = products.find(p => p.id === productId);
                if (product) {
                    editingProductId = productId;
                    modalTitle.textContent = 'Edit Product';

                    // Populate form fields
                    document.getElementById('productName').value = product.name;
                    document.getElementById('productOneLiner').value = product.oneLiner;
                    document.getElementById('productDescription').value = product.description;
                    document.getElementById('productCategory').value = product.category;
                    document.getElementById('productMaterial').value = product.material;
                    document.getElementById('productPrice').value = product.price;
                    document.getElementById('productStock').value = product.stock;

                    // Show image preview
                    const preview = document.getElementById('imagePreview');
                    preview.src = product.image;
                    preview.classList.remove('hidden');
                }
            } else {
                // Add mode
                editingProductId = null;
                modalTitle.textContent = 'Add New Product';
                form.reset();
                document.getElementById('imagePreview').classList.add('hidden');
            }

            modal.style.display = 'block';
        }

        function closeProductModal() {
            document.getElementById('productModal').style.display = 'none';
            editingProductId = null;
        }

        function handleProductSubmit(e) {
            e.preventDefault();

            const formData = new FormData(e.target);
            const imageFile = document.getElementById('productImage').files[0];

            // Create product object
            const productData = {
                name: document.getElementById('productName').value,
                oneLiner: document.getElementById('productOneLiner').value,
                description: document.getElementById('productDescription').value,
                category: document.getElementById('productCategory').value,
                material: document.getElementById('productMaterial').value,
                price: parseFloat(document.getElementById('productPrice').value),
                stock: parseInt(document.getElementById('productStock').value),
                image: imageFile ? URL.createObjectURL(imageFile) : 'https://images.unsplash.com/photo-1515562141207-7a88fb7ce338?w=400&h=300&fit=crop'
            };

            if (editingProductId) {
                // Update existing product
                const index = products.findIndex(p => p.id === editingProductId);
                if (index !== -1) {
                    products[index] = { ...products[index], ...productData };
                }
            } else {
                // Add new product
                const newId = Math.max(...products.map(p => p.id), 0) + 1;
                products.push({ id: newId, ...productData });
            }

            // In production, send data to backend
            submitProductToBackend(productData);

            renderProducts();
            updateDashboardStats();
            closeProductModal();
        }

        function editProduct(productId) {
            openProductModal(productId);
        }

        function deleteProduct(productId) {
            if (confirm('Are you sure you want to delete this product?')) {
                products = products.filter(p => p.id !== productId);
                renderProducts();
                updateDashboardStats();

                // In production, send delete request to backend
                deleteProductFromBackend(productId);
            }
        }

        // Orders management
        function renderOrders() {
            const tbody = document.getElementById('ordersTableBody');
            if (!tbody) return;

            tbody.innerHTML = '';

            orders.forEach(order => {
                const row = document.createElement('tr');
                const itemsText = order.items.map(item => {
                    const product = products.find(p => p.id === item.productId);
                    return `${product ? product.name : 'Unknown Product'} (${item.quantity})`;
                }).join(', ');

                row.innerHTML = `
            <td>${order.id}</td>
            <td>
                <div style="font-weight: 600;">${order.customer}</div>
                <div style="font-size: 0.8rem; color: #CCCCCC;">${order.email}</div>
            </td>
            <td>${itemsText}</td>
            <td>$${order.total}</td>
            <td>${order.date}</td>
            <td>${order.shippingAddress}</td>
            <td><span class="status-badge status-${order.status}">${order.status}</span></td>
            <td>
                <div class="action-buttons">
                    <button class="btn btn-secondary btn-sm" onclick="updateOrderStatus('${order.id}')">
                        <i class="fas fa-edit"></i> Update
                    </button>
                    <button class="btn btn-primary btn-sm" onclick="viewOrderDetails('${order.id}')">
                        <i class="fas fa-eye"></i> View
                    </button>
                </div>
            </td>
        `;

                tbody.appendChild(row);
            });
        }

        function updateOrderStatus(orderId) {
            const order = orders.find(o => o.id === orderId);
            if (order) {
                const newStatus = prompt('Enter new status (pending, processing, shipped, delivered, cancelled):', order.status);
                if (newStatus && ['pending', 'processing', 'shipped', 'delivered', 'cancelled'].includes(newStatus)) {
                    order.status = newStatus;
                    renderOrders();
                    updateDashboardStats();

                    // In production, send update to backend
                    updateOrderStatusInBackend(orderId, newStatus);
                }
            }
        }

        function viewOrderDetails(orderId) {
            const order = orders.find(o => o.id === orderId);
            if (order) {
                const itemsDetail = order.items.map(item => {
                    const product = products.find(p => p.id === item.productId);
                    return `${product ? product.name : 'Unknown Product'} - Quantity: ${item.quantity} - Price: $${item.price}`;
                }).join('\n');

                alert(`Order Details:\n\nOrder ID: ${order.id}\nCustomer: ${order.customer}\nEmail: ${order.email}\nItems:\n${itemsDetail}\nTotal: $${order.total}\nShipping: ${order.shippingAddress}\nStatus: ${order.status}\nDate: ${order.date}`);
            }
        }

        function exportOrders() {
            const csvContent = "data:text/csv;charset=utf-8," +
                "Order ID,Customer,Email,Items,Total,Date,Shipping Address,Status\n" +
                orders.map(order => {
                    const itemsText = order.items.map(item => {
                        const product = products.find(p => p.id === item.productId);
                        return `${product ? product.name : 'Unknown Product'} (${item.quantity})`;
                    }).join('; ');
                    return `${order.id},${order.customer},${order.email},"${itemsText}",${order.total},${order.date},"${order.shippingAddress}",${order.status}`;
                }).join('\n');

            const encodedUri = encodeURI(csvContent);
            const link = document.createElement('a');
            link.setAttribute('href', encodedUri);
            link.setAttribute('download', 'orders.csv');
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        // Categories management
        function renderCategories() {
            const tbody = document.getElementById('categoriesTableBody');
            if (!tbody) return;

            tbody.innerHTML = '';

            categories.forEach(category => {
                const row = document.createElement('tr');
                row.innerHTML = `
            <td>${category.name}</td>
            <td>${category.description}</td>
            <td>${category.productCount}</td>
            <td><span class="status-badge status-${category.status}">${category.status}</span></td>
            <td>
                <div class="action-buttons">
                    <button class="btn btn-secondary btn-sm" onclick="editCategory(${category.id})">
                        <i class="fas fa-edit"></i> Edit
                    </button>
                    <button class="btn btn-danger btn-sm" onclick="deleteCategory(${category.id})">
                        <i class="fas fa-trash"></i> Delete
                    </button>
                </div>
            </td>
        `;
                tbody.appendChild(row);
            });
        }

        function openCategoryModal(categoryId = null) {
            const modal = document.getElementById('categoryModal');
            const form = document.getElementById('categoryForm');

            if (categoryId) {
                // Edit mode
                const category = categories.find(c => c.id === categoryId);
                if (category) {
                    editingCategoryId = categoryId;
                    document.getElementById('categoryName').value = category.name;
                    document.getElementById('categoryDescription').value = category.description;
                }
            } else {
                // Add mode
                editingCategoryId = null;
                form.reset();
            }

            modal.style.display = 'block';
        }

        function closeCategoryModal() {
            document.getElementById('categoryModal').style.display = 'none';
            editingCategoryId = null;
        }

        function handleCategorySubmit(e) {
            e.preventDefault();

            const categoryData = {
                name: document.getElementById('categoryName').value,
                description: document.getElementById('categoryDescription').value,
                productCount: 0,
                status: 'active'
            };

            if (editingCategoryId) {
                // Update existing category
                const index = categories.findIndex(c => c.id === editingCategoryId);
                if (index !== -1) {
                    categories[index] = { ...categories[index], ...categoryData };
                }
            } else {
                // Add new category
                const newId = Math.max(...categories.map(c => c.id), 0) + 1;
                categories.push({ id: newId, ...categoryData });
            }

            // In production, send data to backend
            submitCategoryToBackend(categoryData);

            renderCategories();
            updateCategoryOptions();
            closeCategoryModal();
        }

        function editCategory(categoryId) {
            openCategoryModal(categoryId);
        }

        function deleteCategory(categoryId) {
            if (confirm('Are you sure you want to delete this category?')) {
                categories = categories.filter(c => c.id !== categoryId);
                renderCategories();
                updateCategoryOptions();

                // In production, send delete request to backend
                deleteCategoryFromBackend(categoryId);
            }
        }

        function updateCategoryOptions() {
            const select = document.getElementById('productCategory');
            if (select) {
                const currentValue = select.value;
                select.innerHTML = '<option value="">Select Category</option>';

                categories.forEach(category => {
                    const option = document.createElement('option');
                    option.value = category.name.toLowerCase();
                    option.textContent = category.name;
                    select.appendChild(option);
                });

                select.value = currentValue;
            }
        }

        // Dashboard statistics
        function updateDashboardStats() {
            const totalProducts = products.length;
            const totalOrders = orders.length;
            const totalRevenue = orders.reduce((sum, order) => sum + order.total, 0);
            const lowStockItems = products.filter(p => p.stock <= 5).length;

            document.getElementById('totalProducts').textContent = totalProducts;
            document.getElementById('totalOrders').textContent = totalOrders;
            document.getElementById('totalRevenue').textContent = `$${totalRevenue.toLocaleString()}`;
            document.getElementById('lowStockItems').textContent = lowStockItems;
        }

        // Analytics
        function updateAnalytics() {
            const monthlySales = orders.reduce((sum, order) => sum + order.total, 0);
            const avgOrderValue = orders.length > 0 ? monthlySales / orders.length : 0;

            // Calculate top category
            const categoryStats = {};
            products.forEach(product => {
                categoryStats[product.category] = (categoryStats[product.category] || 0) + 1;
            });

            const topCategory = Object.keys(categoryStats).reduce((a, b) =>
                categoryStats[a] > categoryStats[b] ? a : b, 'Rings');

            document.getElementById('monthlySales').textContent = `$${monthlySales.toLocaleString()}`;
            document.getElementById('topCategory').textContent = topCategory.charAt(0).toUpperCase() + topCategory.slice(1);
            document.getElementById('conversionRate').textContent = '3.2%'; // Mock data
            document.getElementById('avgOrderValue').textContent = `$${avgOrderValue.toFixed(2)}`;
        }

        // Backend API functions (mock implementations)
        function submitProductToBackend(productData) {
            // In production, this would make an actual API call
            console.log('Submitting product to backend:', productData);

            // Mock API call
            // fetch('/api/products', {
            //     method: 'POST',
            //     headers: {
            //         'Content-Type': 'application/json',
            //     },
            //     body: JSON.stringify(productData)
            // }).then(response => response.json())
            //   .then(data => console.log('Product saved:', data));
        }

        function deleteProductFromBackend(productId) {
            console.log('Deleting product from backend:', productId);

            // Mock API call
            // fetch(`/api/products/${productId}`, {
            //     method: 'DELETE'
            // }).then(response => response.json())
            //   .then(data => console.log('Product deleted:', data));
        }

        function submitCategoryToBackend(categoryData) {
            console.log('Submitting category to backend:', categoryData);

            // Mock API call
            // fetch('/api/categories', {
            //     method: 'POST',
            //     headers: {
            //         'Content-Type': 'application/json',
            //     },
            //     body: JSON.stringify(categoryData)
            // }).then(response => response.json())
            //   .then(data => console.log('Category saved:', data));
        }

        function deleteCategoryFromBackend(categoryId) {
            console.log('Deleting category from backend:', categoryId);

            // Mock API call
            // fetch(`/api/categories/${categoryId}`, {
            //     method: 'DELETE'
            // }).then(response => response.json())
            //   .then(data => console.log('Category deleted:', data));
        }

        function updateOrderStatusInBackend(orderId, status) {
            console.log('Updating order status in backend:', orderId, status);

            // Mock API call
            // fetch(`/api/orders/${orderId}/status`, {
            //     method: 'PUT',
            //     headers: {
            //         'Content-Type': 'application/json',
            //     },
            //     body: JSON.stringify({ status })
            // }).then(response => response.json())
            //   .then(data => console.log('Order status updated:', data));
        }

        // Modal close functionality
        window.onclick = function (event) {
            const productModal = document.getElementById('productModal');
            const categoryModal = document.getElementById('categoryModal');

            if (event.target === productModal) {
                closeProductModal();
            }
            if (event.target === categoryModal) {
                closeCategoryModal();
            }
        }

        // Simulate receiving new orders (for demo purposes)
        function simulateNewOrder() {
            const newOrder = {
                id: `ORD-${String(orders.length + 1).padStart(3, '0')}`,
                customer: `Customer ${orders.length + 1}`,
                email: `customer${orders.length + 1}@example.com`,
                items: [
                    { productId: 1, quantity: 1, price: 1400 }
                ],
                total: 1400,
                date: new Date().toISOString().split('T')[0],
                shippingAddress: `${123 + orders.length} Random St, City, State 12345`,
                status: 'pending'
            };

            orders.push(newOrder);
            renderOrders();
            updateDashboardStats();
            updateAnalytics();
        }

        // Add some demo functionality
        setInterval(() => {
            // Simulate new orders every 30 seconds (for demo)
            if (Math.random() > 0.8) {
                simulateNewOrder();
            }
        }, 30000);
    </script>
</body>

</html>